# 本日の開発タスク: GORewrite（棋譜再生・印刷アプリ）枝分かれ手順実装

## 目標
棋譜再生・印刷アプリとして、正解ルートだけでなく、失敗ルートや変化図（枝分かれ）を登録・管理・再生できる機能を実装する。

## タスク一覧

- [x] 現状のデータ構造の確認
    - [x] `GoBoardInput.tsx` での石の配置ロジック
    - [x] `tsumego.ts` (Sanityスキーマ) の構造確認（現在 `stones` 配列のみか、木構造が必要か）

- [ ] スキーマの更新（必要な場合）
    - [ ] 枝分かれ（Variation）を表現するためのスキーマ変更
    - [ ] 再帰的構造またはParent参照の導入
    - **Note:** GORewrite拡張機能としては実装完了済み。Sanity側の対応は保留。

- [x] UIの実装
    - [x] 「変化図モード」の追加、または既存の入力モードでの分岐サポート (実装済み: `addMove`による自動分岐)
    - [x] 分岐作成時のUI（「ここから分岐」ボタンなど） (実装済み: 既存手に重ねて別手入力)
    - [x] 分岐ツリーの視覚化（Ghost Stonesで実装済み）

- [x] 再生機能の更新
    - [x] `GoBoard.tsx` での分岐再生対応 (実装済み)
    - [x] ユーザーが分岐点で次の手として別の手を選んだ場合の挙動 (実装済み)

## Legionへの依頼（バックグラウンド）
- [ ] YogaProでの変更に対するビルドチェック
- [ ] ブラウザでの動作検証（YogaProでの実装が一段落したら）
