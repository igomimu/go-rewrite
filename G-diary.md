# 2025-12-19
- **Label and Symbol Modes**: Implemented Setup Mode tweaks, Label Mode (A, B, C...) and Symbol Mode (Triangle, Circle, Square, Cross).
- **Numbered Mode Refinements**:
    - Disabled double-click color toggle.
    - Forced Black color on mode activation.
    - Added Undo logic (remove last stone) for Right-Click and Delete key.
- **SGF Export**: Fixed bug where natural captures were exported as `AE` tags. Added `LB`, `TR`, `CR`, `SQ`, `MA` support.
- **Hidden Move Legend**: Implemented support for Manual Labels. Fixed issue where footer/labels were missing due to unpassed props. Added **Auto-Detection for Setup Stones** (collisions with initial state now appear automatically as `(Init)`).
    - **Update v32.0**: Switched to "Diff-based Detection" to robustly capture ALL hidden moves (Numbered, Simple/Unnumbered, Color Swaps) automatically.
    - **Display**: Legend appears in a dedicated **Footer area below the board grid** (extending image height), matching the visual requirement.
    - **Bug Fix**: Resolved issue where legends were duplicated endlessly due to reference equality checks. Now uses Deep Content Check (Color/Number) to only log actual changes.
- **Double-Click Color Swap**:
    - **Numbered Mode**: Toggles last placed stone color.
    - **Stone (Simple) Mode**: Double-clicking an existing stone toggles its color immediately and updates the active tool color to matched the toggled color.
- **UI Simplification**: Removed Manual Tool Mode buttons (Stone/Label/Symbol) to reduce clutter, as Auto-Detection handles labeling needs.
- **Double-Click Color Swap**: In Numbered Mode, double-clicking the last placed stone toggles its color (Black/White).
- **UI Restoration**: Restored missing Tool Mode buttons (Stone/Label/Symbol).
- **UI Restoration**: Restored missing Tool Mode buttons (Stone/Label/Symbol).
- **UI Restoration**: Restored missing Tool Mode buttons (Stone/Label/Symbol).
