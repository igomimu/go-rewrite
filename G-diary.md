# 2025-12-19
- **Label and Symbol Modes**: Implemented Setup Mode tweaks, Label Mode (A, B, C...) and Symbol Mode (Triangle, Circle, Square, Cross).
- **Numbered Mode Refinements**:
    - Disabled double-click color toggle.
    - Forced Black color on mode activation.
    - Added Undo logic (remove last stone) for Right-Click and Delete key.
- **SGF Export**: Fixed bug where natural captures were exported as `AE` tags. Added `LB`, `TR`, `CR`, `SQ`, `MA` support.
- **Hidden Move Legend**: Implemented support for Manual Labels. Fixed issue where footer/labels were missing due to unpassed props. Added **Auto-Detection for Setup Stones** (collisions with initial state now appear automatically as `(Init)`).
    - **Update v32.0**: Switched to "Diff-based Detection".
    - **Update v33.0**:
        - **凡例の分離**: 盤面との間隔を広げ(80px)、背景マスクを追加することで、盤の罫線と凡例が重ならないように完全に分離しました。
        - **テキスト整理**: 凡例の「Init」という文字を削除し、石のみの表示に変更しました。
        - **サイズ調整**: 凡例の石と数字を大きくし、視認性を向上させました（半径18px, フォント16px）。
        - **ロジック修正**: 重複検出の不具合を修正し、同色の石による上書き（意味のない重複）は凡例に出ないようにしました。
- **ダブルクリック色変更**:
    - **手数モード**: 最後に打った石をダブルクリックすると白黒が反転します。
    - **配石(標準)モード**: 既にある石をダブルクリックすると、その石の色が反転し、手持ちの石の色もその色に変わります。
- **UI簡略化**: 自動検出により手動ラベルが不要になったため、ツールボタン（●/A/★）を削除して画面をすっきりさせました。
- **Double-Click Color Swap**:
    - **Numbered Mode**: Toggles last placed stone color.
    - **Stone (Simple) Mode**: Double-clicking an existing stone toggles its color immediately and updates the active tool color to matched the toggled color.
- **UI Simplification**: Removed Manual Tool Mode buttons (Stone/Label/Symbol) to reduce clutter, as Auto-Detection handles labeling needs.
- **Double-Click Color Swap**: In Numbered Mode, double-clicking the last placed stone toggles its color (Black/White).
- **UI Restoration**: Restored missing Tool Mode buttons (Stone/Label/Symbol).
- **UI Restoration**: Restored missing Tool Mode buttons (Stone/Label/Symbol).
- **UI Restoration**: Restored missing Tool Mode buttons (Stone/Label/Symbol).
